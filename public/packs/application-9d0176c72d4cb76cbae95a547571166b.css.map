{"version":3,"file":"application-9d0176c72d4cb76cbae95a547571166b.css","sources":["webpack:///./app/javascript/app/javascript/app.vue","webpack:///./app/javascript/components/app/javascript/components/list.vue"],"sourcesContent":["<template>\n  <div class=\"board\">\n    <draggable v-model=\"lists\" :options=\"{group: 'lists'}\" class=\"dragArea d-inline-block\" @end=\"listMoved\">\n      <list v-for=\"(list, index) in lists\" :list=\"list\"></list>\n    </draggable>\n\n    <div class=\"list\">\n      <a v-if=\"!editing\" v-on:click=\"startEditing\">Add a List</a>\n      <textarea v-if=\"editing\" ref=\"message\" v-model=\"message\" class=\"form-control mb-1\"></textarea>\n      <button v-if=\"editing\" v-on:click=\"createList\" class=\"btn btn-secondary\">Add</button>\n      <a v-if=\"editing\" v-on:click=\"editing=false\">Cancel</a>\n    </div>\n  </div>\n</template>\n\n<script>\nimport draggable from 'vuedraggable'\nimport list from 'components/list'\n\nexport default {\n  components: { draggable, list },\n\n  data: function() {\n    return {\n      editing: false,\n      message: \"\",\n    }\n  },\n\n  computed: {\n    lists: {\n      get() {\n        return this.$store.state.lists\n      },\n      set(value) {\n        this.$store.state.lists = value\n      },\n    },\n  },\n\n  methods: {\n    startEditing: function() {\n      this.editing = true\n      this.$nextTick(() => { this.$refs.message.focus() })\n    },\n\n    listMoved: function(event) {\n      var data = new FormData\n      data.append(\"list[position]\", event.newIndex + 1)\n\n      Rails.ajax({\n        beforeSend: () => true,\n        url: `/lists/${this.lists[event.newIndex].id}/move`,\n        type: \"PATCH\",\n        data: data,\n        dataType: \"json\",\n      })\n    },\n\n    createList: function() {\n      var data = new FormData\n      data.append(\"list[name]\", this.message)\n\n      Rails.ajax({\n        beforeSend: () => true,\n        url: \"/lists\",\n        type: \"POST\",\n        data: data,\n        dataType: \"json\",\n        success: (data) => {\n          this.message = \"\"\n          this.editing = false\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.dragArea {\n  min-height: 10px;\n}\n\n.board {\n  overflow-x: auto;\n  white-space: nowrap;\n}\n\n.list {\n  background: #E2E4E6;\n  border-radius: 3px;\n  display: inline-block;\n  margin-right: 20px;\n  padding: 10px;\n  vertical-align: top;\n  width: 270px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/app/javascript/app.vue","<template>\n  <div class=\"list\">\n    <h6>{{ list.name }}</h6>\n\n    <draggable v-model=\"list.cards\" :options=\"{group: 'cards'}\" class=\"dragArea\" @change=\"cardMoved\">\n      <card v-for=\"card in list.cards\" :key=\"card.id\" :card=\"card\" :list=\"list\"></card>\n    </draggable>\n\n    <a v-if=\"!editing\" v-on:click=\"startEditing\">Add a card</a>\n    <textarea v-if=\"editing\" ref=\"message\" v-model=\"message\" class=\"form-control mb-1\"></textarea>\n    <button v-if=\"editing\" v-on:click=\"createCard\" class=\"btn btn-secondary\">Add</button>\n    <a v-if=\"editing\" v-on:click=\"editing=false\">Cancel</a>\n  </div>\n</template>\n\n<script>\nimport draggable from 'vuedraggable'\nimport card from 'components/card'\n\nexport default {\n  components: { card, draggable },\n  props: [\"list\"],\n\n  data: function() {\n    return {\n      editing: false,\n      message: \"\"\n    }\n  },\n\n  methods: {\n    startEditing: function() {\n      this.editing = true\n      this.$nextTick(() => { this.$refs.message.focus() })\n    },\n\n    cardMoved: function(event) {\n      const evt = event.added || event.moved\n      if (evt == undefined) { return }\n\n      const element = evt.element\n      const list_index = window.store.state.lists.findIndex((list) => {\n        return list.cards.find((card) => {\n          return card.id === element.id\n        })\n      })\n\n      var data = new FormData\n      data.append(\"card[list_id]\", window.store.state.lists[list_index].id)\n      data.append(\"card[position]\", evt.newIndex + 1)\n\n      Rails.ajax({\n        beforeSend: () => true,\n        url: `/cards/${element.id}/move`,\n        type: \"PATCH\",\n        data: data,\n        dataType: \"json\"\n      })\n    },\n\n    createCard: function() {\n      var data = new FormData\n      data.append(\"card[list_id]\", this.list.id)\n      data.append(\"card[name]\", this.message)\n\n      Rails.ajax({\n        beforeSend: () => true,\n        url: \"/cards\",\n        type: \"POST\",\n        data: data,\n        dataType: \"json\",\n        success: (data) => {\n          this.message = \"\"\n          this.$nextTick(() => { this.$refs.message.focus() })\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.dragArea {\n  min-height: 10px;\n}\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ./app/javascript/components/app/javascript/components/list.vue"],"mappings":";AAgFA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","sourceRoot":""}